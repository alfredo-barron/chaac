<configuration>

    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="ch.qos.logback.core.encoder.LayoutWrappingEncoder">
            <layout class="log.MySampleLayout">
                <nodeId>${NODE_ID}</nodeId>
            </layout>
        </encoder>
    </appender>

    <timestamp key="bySecond" datePattern="yyyyMMdd'T'HHmmss"/>

    <appender name="FILE" class="ch.qos.logback.core.FileAppender">
        <filter class="ch.qos.logback.classic.filter.LevelFilter">
            <!--<level>INFO</level>-->
            <onMatch>ACCEPT</onMatch>
            <onMismatch>DENY</onMismatch>
        </filter>
        <file>${LOG_PATH}/${NODE_ID}-${bySecond}.txt</file>
        <encoder class="ch.qos.logback.core.encoder.LayoutWrappingEncoder">
            <layout class="log.MySampleLayout">
                <nodeId>${NODE_ID}</nodeId>
            </layout>
        </encoder>
    </appender>

    <appender name="FILE_ACCESS" class="ch.qos.logback.core.FileAppender">
        <file>${LOG_PATH}/${NODE_ID}-access-${bySecond}.log</file>

        <filter class="log.MyMarketFilterAccess"/>

        <encoder class="ch.qos.logback.core.encoder.LayoutWrappingEncoder">
            <layout class="log.LogFileHeaderPatternLayout">
                <pattern>%msg%n</pattern>
            </layout>
        </encoder>
    </appender>

    <logger name="ServerMiddleware">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE"/>
    </logger>

    <logger name="commons.server.WebServer">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE"/>
    </logger>

    <logger name="manager.acquisition.AcquisitionService">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE_ACCESS"/>
    </logger>

    <logger name="manager.acquisition.AttributeService">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE_ACCESS"/>
    </logger>

    <logger name="manager.acquisition.HostService">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE_ACCESS"/>
    </logger>

    <logger name="manager.acquisition.storage.DataContextStorage">
        <appender-ref ref="STDOUT"/>
    </logger>

    <logger name="manager.analysis.AnalysisService">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE_ACCESS"/>
    </logger>

    <logger name="manager.analysis.RankingService">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE_ACCESS"/>
    </logger>

    <logger name="manager.analysis.ranking.Ranking">
        <appender-ref ref="STDOUT"/>
    </logger>

    <logger name="manager.creation.CreationService">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE_ACCESS"/>
    </logger>

    <logger name="manager.creation.DataPoolService">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE_ACCESS"/>
    </logger>

    <logger name="manager.creation.DataContainerService">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE_ACCESS"/>
    </logger>

    <logger name="data.MetadataService">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE_ACCESS"/>
    </logger>

    <logger name="services.OperationService">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE_ACCESS"/>
    </logger>

    <logger name="services.ResponseTimeService">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE_ACCESS"/>
    </logger>

    <logger name="services.ServiceTimeService">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE_ACCESS"/>
    </logger>

    <logger name="commons.client.Rest">
        <appender-ref ref="STDOUT"/>
    </logger>

    <!--    <logger name="mx.cinvestav.MainV5">-->
    <!--        <appender-ref ref="FILE"/>-->
    <!--    </logger>-->
    <!--    <root level="DEBUG">-->
    <!--        <appender-ref ref="STDOUT" />-->
    <!--&lt;!&ndash;        <appender-ref ref="FILE" />&ndash;&gt;-->
    <!--    </root>-->
    <!--    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">-->
    <!--        <encoder>-->
    <!--            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level - %msg - %elapsedTime{}%n</pattern>-->
    <!--        </encoder>-->
    <!--    </appender>-->

    <!--    <root level="debug">-->
    <!--        <appender-ref ref="STDOUT" />-->
    <!--    </root>-->
</configuration>